var CanvasLayer,CanvasPushpin;(function(){var c=0;function b(){var d="canvasElm"+c;c++;if(window[d]){return b()}return d}function a(d){var e=document.getElementById(d);if(e){e=e.getContext("2d")}return e}CanvasLayer=function(d){var e=new Microsoft.Maps.EntityCollection();Microsoft.Maps.Events.addHandler(e,"entityadded",function(f){if(f.entity._canvasID){f.entity._renderCanvas()}});Microsoft.Maps.Events.addHandler(d,"viewchangeend",function(j){var h=e.getLength(),f;for(var g=0;g<h;g++){f=e.get(g);f._renderCanvas()}});return e};CanvasPushpin=function(e,h){var g=b();var d={htmlContent:'<canvas id="'+g+'"></canvas>'};var f=new Microsoft.Maps.Pushpin(e,d);f._canvasID=g;f._renderCanvas=function(){h(f,a(f._canvasID))};return f}})();Microsoft.Maps.moduleLoaded("CanvasPushpinModule");